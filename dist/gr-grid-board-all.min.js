angular.module("grGridBoard",[]).directive("grGridBoard",function(){"use strict";return{restrict:"E",transclude:!0,scope:{values:"=?",onClick:"&",countSelected:"=?",rows:"@",columns:"@",width:"@",height:"@",lineColour:"@",selectedColour:"@",unselectedColour:"@"},link:function(a,b){function c(){d(a.values,parseInt(a.rows))||(a.values=e(parseInt(a.rows),parseInt(a.columns))),f(),g()}function d(a,b){return a instanceof Array&&a.length>=b}function e(b,c){return Array.apply(null,new Array(parseInt(a.rows))).map(function(){return Array.apply(null,new Array(parseInt(a.columns))).map(Boolean.prototype.valueOf,!1)})}function f(){a.viewBox="0 0 "+a.width+" "+a.height,a.rectWidth=a.width/a.columns,a.rectHeight=a.height/a.rows,a.lineColour=a.lineColour||"black",a.selectedColour=a.selectedColour||a.lineColour,a.unselectedColour=a.unselectedColour||"white",a.positions=h(a.rows,a.columns,a.rectWidth,a.rectHeight)}function g(){for(var b=0,c=0;c<parseInt(a.rows);c++)for(var d=0;d<parseInt(a.columns);d++)b+=a.values[c][d]?1:0;a.countSelected=b}function h(a,b,c,d){for(var e=[],f=0;a>f;f++)for(var g=0;b>g;g++)e.push({line:f,column:g,x:g*c,y:f*d});return e}c(),a.$watch("rows",function(a){c()}),a.$watch("columns",function(a){c()}),a.clickRect=function(b,c){a.values[b][c]=!a.values[b][c],g(),a.onClick({line:b,column:c,values:a.values,countSelected:a.countSelected,selected:a.values[b][c]})}},templateUrl:"gr-grid-board-template",replace:!0}}),angular.module("grGridBoard").run(["$templateCache",function(a){"use strict";a.put("gr-grid-board-template",'<svg xmlns="http://www.w3.org/2000/svg" ng-attr-viewBox="{{viewBox}}">\n	<rect \n		ng-repeat="pos in positions"\n		class="gr-grid-rect gr-grid-rect-{{pos.line}}x{{pos.column}}"\n		ng-click="clickRect(pos.line, pos.column)"\n		ng-attr-x="{{pos.x}}" ng-attr-y="{{pos.y}}"\n		ng-attr-width="{{rectWidth}}" ng-attr-height="{{rectHeight}}"\n		ng-attr-stroke="{{lineColour}}" ng-attr-fill="{{values[pos.line][pos.column] ? selectedColour : unselectedColour}}" fill-opacity="1.0" stroke-opacity="1.0">\n	</rect>\n</svg>')}]);